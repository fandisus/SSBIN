app.controller("ctrlIUCN",["$scope",function(a){var c=JSON.parse($("#init").html());a.statuses=c.statuses;a.pager={uri:"/admin/lookup/iucn",totalItems:c.totalItems};a.pager.filterOptions=[{key:"abbr",text:"Abbreviation"},{key:"long_name",text:"IUCN Status"}];a.pager.orderOptions=[{key:"abbr",text:"Abbreviation"},{key:"long_name",text:"IUCN Status"}];a.pager.pageChanged=function(b){a.statuses=b.statuses;a.$apply()};a.target=null;a.o={};a.printDataInfo=printDataInfo;$('[data-toggle="popover"]').popover();
a.newO=function(){a.target=null;a.modalTitle="New IUCN Status";a.o={abbr:"",long_name:""};$("#modalEdit").modal("show")};a.edit=function(b){a.target=b;a.modalTitle="Edit IUCN Status: "+b.long_name+"("+b.abbr+")";a.o=angular.copy(b);$("#modalEdit").modal("show")};a.saveChanges=function(b){null==a.target?d(b):a.saveOld(b)};var d=function(b){tr.post("/admin/lookup/iucn",{a:"saveNew",o:b,token:token},function(b){a.statuses.push(b["new"]);$.notify(b.message,"success");$("#modalEdit").modal("hide");a.$apply()})};
a.saveOld=function(b){tr.post("/admin/lookup/iucn",{a:"saveOld",o:b,target:a.target,token:token},function(b){a.target.abbr=b.o.abbr;a.target.long_name=b.o.long_name;a.target.data_info=b.o.data_info;$.notify(b.message,"success");$("#modalEdit").modal("hide");a.$apply()})};a["delete"]=function(b){0!=confirm("Are you sure you want to delete?\nIUCN Status: "+b.long_name)&&tr.post("/admin/lookup/iucn",{a:"delete",o:a.target,token:token},function(b){arrRemoveElement(a.statuses,a.target);$("#modalEdit").modal("hide");
$.notify(b.message,"success");a.$apply()})};a.oChanged=function(){console.log(a.o)}}]);
